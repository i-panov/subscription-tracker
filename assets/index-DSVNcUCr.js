var Ki=Object.defineProperty;var Rr=e=>{throw TypeError(e)};var Zi=(e,t,n)=>t in e?Ki(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var at=(e,t,n)=>Zi(e,typeof t!="symbol"?t+"":t,n),Qn=(e,t,n)=>t.has(e)||Rr("Cannot "+n);var c=(e,t,n)=>(Qn(e,t,"read from private field"),n?n.call(e):t.get(e)),C=(e,t,n)=>t.has(e)?Rr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),E=(e,t,n,r)=>(Qn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),q=(e,t,n)=>(Qn(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Yr=!1;var dr=Array.isArray,zi=Array.prototype.indexOf,_r=Array.from,Mn=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,Gi=Object.getOwnPropertyDescriptors,Ji=Object.prototype,Xi=Array.prototype,Kr=Object.getPrototypeOf,Cr=Object.isExtensible;const It=()=>{};function Qi(e){for(var t=0;t<e.length;t++)e[t]()}function Zr(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const ie=2,hr=4,pr=8,Ct=16,Je=32,Mt=64,Bn=128,ge=256,An=512,ee=1024,ce=2048,ht=4096,fe=8192,Ge=16384,br=32768,wn=65536,Mr=1<<17,$i=1<<18,nn=1<<19,es=1<<20,rr=1<<21,mr=1<<22,Nt=1<<23,On=Symbol("$state"),ts=Symbol("legacy props"),ns=Symbol(""),Vt=new class extends Error{constructor(){super(...arguments);at(this,"name","StaleReactionError");at(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function zr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function rs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function is(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ss(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function as(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ls(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function os(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function us(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function fs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function cs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function vs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Un=1,qn=2,Gr=4,ds=8,_s=16,hs=2,ps=4,bs=8,ms=2,K=Symbol(),gs="http://www.w3.org/1999/xhtml";function ws(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let ys=!1;function Jr(e){return e===this.v}function Xr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Qr(e){return!Xr(e,this.v)}let rn=!1,xs=!1;function Ss(){rn=!0}let U=null;function Qt(e){U=e}function Vn(e,t=!1,n){U={p:U,c:null,e:null,s:e,x:null,l:rn&&!t?{s:null,u:null,$:[]}:null}}function Wn(e){var t=U,n=t.e;if(n!==null){t.e=null;for(var r of n)hi(r)}return U=t.p,{}}function yn(){return!rn||U!==null&&U.l===null}let yt=[];function $r(){var e=yt;yt=[],Qi(e)}function xn(e){if(yt.length===0&&!dn){var t=yt;queueMicrotask(()=>{t===yt&&$r()})}yt.push(e)}function Es(){for(;yt.length>0;)$r()}const ks=new WeakMap;function ei(e){var t=I;if(t===null)return k.f|=Nt,e;if((t.f&br)===0){if((t.f&Bn)===0)throw!t.parent&&e instanceof Error&&ti(e),e;t.b.error(e)}else $t(e,t)}function $t(e,t){for(;t!==null;){if((t.f&Bn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&ti(e),e}function ti(e){const t=ks.get(e);t&&(Mn(e,"message",{value:t.message}),Mn(e,"stack",{value:t.stack}))}const In=new Set;let L=null,Tn=null,W=null,ir=new Set,He=[],Yn=null,sr=!1,dn=!1;var Zt,zt,Gt,St,bn,Jt,Xt,Y,ar,gt,lr,ni;const Fn=class Fn{constructor(){C(this,Y);at(this,"committed",!1);at(this,"current",new Map);C(this,Zt,new Map);C(this,zt,new Set);C(this,Gt,0);C(this,St,0);C(this,bn,null);C(this,Jt,[]);C(this,Xt,[]);at(this,"skipped_effects",new Set)}process(t){He=[],Tn=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)q(this,Y,ar).call(this,r,n);q(this,Y,lr).call(this),c(this,St)>0?(q(this,Y,gt).call(this,n.effects),q(this,Y,gt).call(this,n.render_effects),q(this,Y,gt).call(this,n.block_effects)):(Tn=this,L=null,Ar(n.render_effects),Ar(n.effects),Tn=null),W=null}capture(t,n){c(this,Zt).has(t)||c(this,Zt).set(t,n),this.current.set(t,t.v),W==null||W.set(t,t.v)}activate(){L=this}deactivate(){L=null,W=null}flush(){if(He.length>0){if(this.activate(),ri(),L!==null&&L!==this)return}else q(this,Y,lr).call(this);this.deactivate();for(const t of ir)if(ir.delete(t),t(),L!==null)break}increment(t){E(this,Gt,c(this,Gt)+1),t&&E(this,St,c(this,St)+1)}decrement(t){E(this,Gt,c(this,Gt)-1),t&&E(this,St,c(this,St)-1);for(const n of c(this,Jt))ne(n,ce),Tt(n);for(const n of c(this,Xt))ne(n,ht),Tt(n);E(this,Jt,[]),E(this,Xt,[]),this.flush()}add_callback(t){c(this,zt).add(t)}settled(){return(c(this,bn)??E(this,bn,Zr())).promise}static ensure(){if(L===null){const t=L=new Fn;In.add(L),dn||Fn.enqueue(()=>{L===t&&t.flush()})}return L}static enqueue(t){xn(t)}apply(){}};Zt=new WeakMap,zt=new WeakMap,Gt=new WeakMap,St=new WeakMap,bn=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,Y=new WeakSet,ar=function(t,n){var v;t.f^=ee;for(var r=t.first;r!==null;){var s=r.f,i=(s&(Je|Mt))!==0,a=i&&(s&ee)!==0,l=a||(s&fe)!==0||this.skipped_effects.has(r);if((r.f&Bn)!==0&&((v=r.b)!=null&&v.is_pending())&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){i?r.f^=ee:(s&hr)!==0?n.effects.push(r):zn(r)&&((r.f&Ct)!==0&&n.block_effects.push(r),Pn(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(q(this,Y,gt).call(this,n.effects),q(this,Y,gt).call(this,n.render_effects),q(this,Y,gt).call(this,n.block_effects),n=n.parent),r=u.next,u=u.parent}},gt=function(t){for(const n of t)((n.f&ce)!==0?c(this,Jt):c(this,Xt)).push(n),ne(n,ee)},lr=function(){if(c(this,St)===0){for(const t of c(this,zt))t();c(this,zt).clear()}c(this,Gt)===0&&q(this,Y,ni).call(this)},ni=function(){var s,i;if(In.size>1){c(this,Zt).clear();var t=W,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of In){if(a===this){n=!1;continue}const l=[];for(const[u,v]of this.current){if(a.current.has(u))if(n&&v!==a.current.get(u))a.current.set(u,v);else continue;l.push(u)}if(l.length===0)continue;const o=[...a.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){for(const u of l)ii(u,o);if(He.length>0){L=a,a.apply();for(const u of He)q(s=a,Y,ar).call(s,u,r);He=[],a.deactivate()}}}L=null,W=t}this.committed=!0,In.delete(this),(i=c(this,bn))==null||i.resolve()};let dt=Fn;function Ds(e){var t=dn;dn=!0;try{for(var n;;){if(Es(),He.length===0&&(L==null||L.flush(),He.length===0))return Yn=null,n;ri()}}finally{dn=t}}function ri(){var e=Kt;sr=!0;try{var t=0;for(Fr(!0);He.length>0;){var n=dt.ensure();if(t++>1e3){var r,s;Is()}n.process(He),_t.clear()}}finally{sr=!1,Fr(e),Yn=null}}function Is(){try{ls()}catch(e){$t(e,Yn)}}let ye=null;function Ar(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Ge|fe))===0&&zn(r)&&(ye=new Set,Pn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?mi(r):r.fn=null),(ye==null?void 0:ye.size)>0)){_t.clear();for(const s of ye){if((s.f&(Ge|fe))!==0)continue;const i=[s];let a=s.parent;for(;a!==null;)ye.has(a)&&(ye.delete(a),i.push(a)),a=a.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(Ge|fe))===0&&Pn(o)}}ye.clear()}}ye=null}}function ii(e,t){if(e.reactions!==null)for(const n of e.reactions){const r=n.f;(r&ie)!==0?ii(n,t):(r&(mr|Ct))!==0&&si(n,t)&&(ne(n,ce),Tt(n))}}function si(e,t){if(e.deps!==null){for(const n of e.deps)if(t.includes(n)||(n.f&ie)!==0&&si(n,t))return!0}return!1}function Tt(e){for(var t=Yn=e;t.parent!==null;){t=t.parent;var n=t.f;if(sr&&t===I&&(n&Ct)!==0)return;if((n&(Mt|Je))!==0){if((n&ee)===0)return;t.f^=ee}}He.push(t)}function Ns(e){let t=0,n=Rt(0),r;return()=>{Vs()&&(f(n),Sr(()=>(t===0&&(r=Lt(()=>e(()=>_n(n)))),t+=1,()=>{xn(()=>{t-=1,t===0&&(r==null||r(),r=void 0,_n(n))})})))}}var Os=wn|nn|Bn;function Ts(e,t,n){new Rs(e,t,n)}var xe,be,vr,Ae,Et,Le,me,ae,Pe,ut,kt,ft,Dt,ct,Hn,jn,re,Cs,Ms,Rn,Cn,or;class Rs{constructor(t,n,r){C(this,re);at(this,"parent");C(this,xe,!1);C(this,be);C(this,vr,null);C(this,Ae);C(this,Et);C(this,Le);C(this,me,null);C(this,ae,null);C(this,Pe,null);C(this,ut,null);C(this,kt,0);C(this,ft,0);C(this,Dt,!1);C(this,ct,null);C(this,Hn,()=>{c(this,ct)&&en(c(this,ct),c(this,kt))});C(this,jn,Ns(()=>(E(this,ct,Rt(c(this,kt))),()=>{E(this,ct,null)})));E(this,be,t),E(this,Ae,n),E(this,Et,r),this.parent=I.b,E(this,xe,!!c(this,Ae).pending),E(this,Le,Zn(()=>{I.b=this;{try{E(this,me,Ee(()=>r(c(this,be))))}catch(s){this.error(s)}c(this,ft)>0?q(this,re,Cn).call(this):E(this,xe,!1)}},Os))}is_pending(){return c(this,xe)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!c(this,Ae).pending}update_pending_count(t){q(this,re,or).call(this,t),E(this,kt,c(this,kt)+t),ir.add(c(this,Hn))}get_effect_pending(){return c(this,jn).call(this),f(c(this,ct))}error(t){var n=c(this,Ae).onerror;let r=c(this,Ae).failed;if(c(this,Dt)||!n&&!r)throw t;c(this,me)&&(oe(c(this,me)),E(this,me,null)),c(this,ae)&&(oe(c(this,ae)),E(this,ae,null)),c(this,Pe)&&(oe(c(this,Pe)),E(this,Pe,null));var s=!1,i=!1;const a=()=>{if(s){ws();return}s=!0,i&&vs(),dt.ensure(),E(this,kt,0),c(this,Pe)!==null&&Yt(c(this,Pe),()=>{E(this,Pe,null)}),E(this,xe,this.has_pending_snippet()),E(this,me,q(this,re,Rn).call(this,()=>(E(this,Dt,!1),Ee(()=>c(this,Et).call(this,c(this,be)))))),c(this,ft)>0?q(this,re,Cn).call(this):E(this,xe,!1)};var l=k;try{le(null),i=!0,n==null||n(t,a),i=!1}catch(o){$t(o,c(this,Le)&&c(this,Le).parent)}finally{le(l)}r&&xn(()=>{E(this,Pe,q(this,re,Rn).call(this,()=>{E(this,Dt,!0);try{return Ee(()=>{r(c(this,be),()=>t,()=>a)})}catch(o){return $t(o,c(this,Le).parent),null}finally{E(this,Dt,!1)}}))})}}xe=new WeakMap,be=new WeakMap,vr=new WeakMap,Ae=new WeakMap,Et=new WeakMap,Le=new WeakMap,me=new WeakMap,ae=new WeakMap,Pe=new WeakMap,ut=new WeakMap,kt=new WeakMap,ft=new WeakMap,Dt=new WeakMap,ct=new WeakMap,Hn=new WeakMap,jn=new WeakMap,re=new WeakSet,Cs=function(){try{E(this,me,Ee(()=>c(this,Et).call(this,c(this,be))))}catch(t){this.error(t)}E(this,xe,!1)},Ms=function(){const t=c(this,Ae).pending;t&&(E(this,ae,Ee(()=>t(c(this,be)))),dt.enqueue(()=>{E(this,me,q(this,re,Rn).call(this,()=>(dt.ensure(),Ee(()=>c(this,Et).call(this,c(this,be)))))),c(this,ft)>0?q(this,re,Cn).call(this):(Yt(c(this,ae),()=>{E(this,ae,null)}),E(this,xe,!1))}))},Rn=function(t){var n=I,r=k,s=U;je(c(this,Le)),le(c(this,Le)),Qt(c(this,Le).ctx);try{return t()}catch(i){return ei(i),null}finally{je(n),le(r),Qt(s)}},Cn=function(){const t=c(this,Ae).pending;c(this,me)!==null&&(E(this,ut,document.createDocumentFragment()),yi(c(this,me),c(this,ut))),c(this,ae)===null&&E(this,ae,Ee(()=>t(c(this,be))))},or=function(t){var n;if(!this.has_pending_snippet()){this.parent&&q(n=this.parent,re,or).call(n,t);return}E(this,ft,c(this,ft)+t),c(this,ft)===0&&(E(this,xe,!1),c(this,ae)&&Yt(c(this,ae),()=>{E(this,ae,null)}),c(this,ut)&&(c(this,be).before(c(this,ut)),E(this,ut,null)))};function As(e,t,n){const r=yn()?gr:wr;if(t.length===0){n(e.map(r));return}var s=L,i=I,a=Ls();Promise.all(t.map(l=>Ps(l))).then(l=>{a();try{n([...e.map(r),...l])}catch(o){(i.f&Ge)===0&&$t(o,i)}s==null||s.deactivate(),ur()}).catch(l=>{$t(l,i)})}function Ls(){var e=I,t=k,n=U,r=L;return function(){je(e),le(t),Qt(n),r==null||r.activate()}}function ur(){je(null),le(null),Qt(null)}function gr(e){var t=ie|ce,n=k!==null&&(k.f&ie)!==0?k:null;return I===null||n!==null&&(n.f&ge)!==0?t|=ge:I.f|=nn,{ctx:U,deps:null,effects:null,equals:Jr,f:t,fn:e,reactions:null,rv:0,v:K,wv:0,parent:n??I,ac:null}}function Ps(e,t){let n=I;n===null&&rs();var r=n.b,s=void 0,i=Rt(K),a=!k,l=new Map;return Zs(()=>{var p;var o=Zr();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===L&&u.committed&&u.deactivate(),ur()})}catch(h){o.reject(h),ur()}var u=L;if(a){var v=!r.is_pending();r.update_pending_count(1),u.increment(v),(p=l.get(u))==null||p.reject(Vt),l.delete(u),l.set(u,o)}const _=(h,d=void 0)=>{if(u.activate(),d)d!==Vt&&(i.f|=Nt,en(i,d));else{(i.f&Nt)!==0&&(i.f^=Nt),en(i,h);for(const[w,y]of l){if(l.delete(w),w===u)break;y.reject(Vt)}}a&&(r.update_pending_count(-1),u.decrement(v))};o.promise.then(_,h=>_(null,h||"unknown"))}),xr(()=>{for(const o of l.values())o.reject(Vt)}),new Promise(o=>{function u(v){function _(){v===s?o(i):u(s)}v.then(_,_)}u(s)})}function ke(e){const t=gr(e);return xi(t),t}function wr(e){const t=gr(e);return t.equals=Qr,t}function ai(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)oe(t[n])}}function Fs(e){for(var t=e.parent;t!==null;){if((t.f&ie)===0)return t;t=t.parent}return null}function yr(e){var t,n=I;je(Fs(e));try{ai(e),t=Di(e)}finally{je(n)}return t}function li(e){var t=yr(e);if(e.equals(t)||(e.v=t,e.wv=Ei()),!At)if(W!==null)W.set(e,e.v);else{var n=(vt||(e.f&ge)!==0)&&e.deps!==null?ht:ee;ne(e,n)}}const _t=new Map;function Rt(e,t){var n={f:0,v:e,reactions:null,equals:Jr,rv:0,wv:0};return n}function Z(e,t){const n=Rt(e);return xi(n),n}function oi(e,t=!1,n=!0){var s;const r=Rt(e);return t||(r.equals=Qr),rn&&n&&U!==null&&U.l!==null&&((s=U.l).s??(s.s=[])).push(r),r}function T(e,t,n=!1){k!==null&&(!De||(k.f&Mr)!==0)&&yn()&&(k.f&(ie|Ct|mr|Mr))!==0&&!(te!=null&&te.includes(e))&&cs();let r=n?xt(t):t;return en(e,r)}function en(e,t){if(!e.equals(t)){var n=e.v;At?_t.set(e,t):_t.set(e,n),e.v=t;var r=dt.ensure();r.capture(e,n),(e.f&ie)!==0&&((e.f&ce)!==0&&yr(e),ne(e,(e.f&ge)===0?ee:ht)),e.wv=Ei(),ui(e,ce),yn()&&I!==null&&(I.f&ee)!==0&&(I.f&(Je|Mt))===0&&(pe===null?Js([e]):pe.push(e))}return t}function _n(e){T(e,e.v+1)}function ui(e,t){var n=e.reactions;if(n!==null)for(var r=yn(),s=n.length,i=0;i<s;i++){var a=n[i],l=a.f;if(!(!r&&a===I)){var o=(l&ce)===0;o&&ne(a,t),(l&ie)!==0?ui(a,ht):o&&((l&Ct)!==0&&ye!==null&&ye.add(a),Tt(a))}}}function xt(e){if(typeof e!="object"||e===null||On in e)return e;const t=Kr(e);if(t!==Ji&&t!==Xi)return e;var n=new Map,r=dr(e),s=Z(0),i=Ot,a=l=>{if(Ot===i)return l();var o=k,u=Ot;le(null),jr(i);var v=l();return le(o),jr(u),v};return r&&n.set("length",Z(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&us();var v=n.get(o);return v===void 0?v=a(()=>{var _=Z(u.value);return n.set(o,_),_}):T(v,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const v=a(()=>Z(K));n.set(o,v),_n(s)}}else T(u,K),_n(s);return!0},get(l,o,u){var h;if(o===On)return e;var v=n.get(o),_=o in l;if(v===void 0&&(!_||(h=Wt(l,o))!=null&&h.writable)&&(v=a(()=>{var d=xt(_?l[o]:K),w=Z(d);return w}),n.set(o,v)),v!==void 0){var p=f(v);return p===K?void 0:p}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var v=n.get(o);v&&(u.value=f(v))}else if(u===void 0){var _=n.get(o),p=_==null?void 0:_.v;if(_!==void 0&&p!==K)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return u},has(l,o){var p;if(o===On)return!0;var u=n.get(o),v=u!==void 0&&u.v!==K||Reflect.has(l,o);if(u!==void 0||I!==null&&(!v||(p=Wt(l,o))!=null&&p.writable)){u===void 0&&(u=a(()=>{var h=v?xt(l[o]):K,d=Z(h);return d}),n.set(o,u));var _=f(u);if(_===K)return!1}return v},set(l,o,u,v){var g;var _=n.get(o),p=o in l;if(r&&o==="length")for(var h=u;h<_.v;h+=1){var d=n.get(h+"");d!==void 0?T(d,K):h in l&&(d=a(()=>Z(K)),n.set(h+"",d))}if(_===void 0)(!p||(g=Wt(l,o))!=null&&g.writable)&&(_=a(()=>Z(void 0)),T(_,xt(u)),n.set(o,_));else{p=_.v!==K;var w=a(()=>xt(u));T(_,w)}var y=Reflect.getOwnPropertyDescriptor(l,o);if(y!=null&&y.set&&y.set.call(v,u),!p){if(r&&typeof o=="string"){var B=n.get("length"),P=Number(o);Number.isInteger(P)&&P>=B.v&&T(B,P+1)}_n(s)}return!0},ownKeys(l){f(s);var o=Reflect.ownKeys(l).filter(_=>{var p=n.get(_);return p===void 0||p.v!==K});for(var[u,v]of n)v.v!==K&&!(u in l)&&o.push(u);return o},setPrototypeOf(){fs()}})}var Lr,fi,ci,vi;function Hs(){if(Lr===void 0){Lr=window,fi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ci=Wt(t,"firstChild").get,vi=Wt(t,"nextSibling").get,Cr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Cr(n)&&(n.__t=void 0)}}function tn(e=""){return document.createTextNode(e)}function hn(e){return ci.call(e)}function Sn(e){return vi.call(e)}function m(e,t){return hn(e)}function lt(e,t=!1){{var n=hn(e);return n instanceof Comment&&n.data===""?Sn(n):n}}function O(e,t=1,n=!1){let r=e;for(;t--;)r=Sn(r);return r}function js(e){e.textContent=""}function di(){return!1}let Pr=!1;function Bs(){Pr||(Pr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Kn(e){var t=k,n=I;le(null),je(null);try{return e()}finally{le(t),je(n)}}function _i(e,t,n,r=n){e.addEventListener(t,()=>Kn(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),Bs()}function Us(e){I===null&&k===null&&as(),k!==null&&(k.f&ge)!==0&&I===null&&ss(),At&&is()}function qs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Xe(e,t,n,r=!0){var s=I;s!==null&&(s.f&fe)!==0&&(e|=fe);var i={ctx:U,deps:null,nodes_start:null,nodes_end:null,f:e|ce,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Pn(i),i.f|=br}catch(o){throw oe(i),o}else t!==null&&Tt(i);if(r){var a=i;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&nn)===0&&(a=a.first),a!==null&&(a.parent=s,s!==null&&qs(a,s),k!==null&&(k.f&ie)!==0&&(e&Mt)===0)){var l=k;(l.effects??(l.effects=[])).push(a)}}return i}function Vs(){return k!==null&&!De}function xr(e){const t=Xe(pr,null,!1);return ne(t,ee),t.teardown=e,t}function Ws(e){Us();var t=I.f,n=!k&&(t&Je)!==0&&(t&br)===0;if(n){var r=U;(r.e??(r.e=[])).push(e)}else return hi(e)}function hi(e){return Xe(hr|es,e,!1)}function Ys(e){dt.ensure();const t=Xe(Mt|nn,e,!0);return(n={})=>new Promise(r=>{n.outro?Yt(t,()=>{oe(t),r(void 0)}):(oe(t),r(void 0))})}function Ks(e){return Xe(hr,e,!1)}function Zs(e){return Xe(mr|nn,e,!0)}function Sr(e,t=0){return Xe(pr|t,e,!0)}function z(e,t=[],n=[]){As(t,n,r=>{Xe(pr,()=>e(...r.map(f)),!0)})}function Zn(e,t=0){var n=Xe(Ct|t,e,!0);return n}function Ee(e,t=!0){return Xe(Je|nn,e,!0,t)}function pi(e){var t=e.teardown;if(t!==null){const n=At,r=k;Hr(!0),le(null);try{t.call(null)}finally{Hr(n),le(r)}}}function bi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Kn(()=>{s.abort(Vt)});var r=n.next;(n.f&Mt)!==0?n.parent=null:oe(n,t),n=r}}function zs(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Je)===0&&oe(t),t=n}}function oe(e,t=!0){var n=!1;(t||(e.f&$i)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Gs(e.nodes_start,e.nodes_end),n=!0),bi(e,t&&!n),Ln(e,0),ne(e,Ge);var r=e.transitions;if(r!==null)for(const i of r)i.stop();pi(e);var s=e.parent;s!==null&&s.first!==null&&mi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Gs(e,t){for(;e!==null;){var n=e===t?null:Sn(e);e.remove(),e=n}}function mi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Yt(e,t,n=!0){var r=[];Er(e,r,!0),gi(r,()=>{n&&oe(e),t&&t()})}function gi(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function Er(e,t,n){if((e.f&fe)===0){if(e.f^=fe,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var s=r.next,i=(r.f&wn)!==0||(r.f&Je)!==0;Er(r,t,i?n:!1),r=s}}}function kr(e){wi(e,!0)}function wi(e,t){if((e.f&fe)!==0){e.f^=fe,(e.f&ee)===0&&(ne(e,ce),Tt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&wn)!==0||(n.f&Je)!==0;wi(n,s?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function yi(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:Sn(n);t.append(n),n=s}}let Kt=!1;function Fr(e){Kt=e}let At=!1;function Hr(e){At=e}let k=null,De=!1;function le(e){k=e}let I=null;function je(e){I=e}let te=null;function xi(e){k!==null&&(te===null?te=[e]:te.push(e))}let $=null,ue=0,pe=null;function Js(e){pe=e}let Si=1,pn=0,Ot=pn;function jr(e){Ot=e}let vt=!1;function Ei(){return++Si}function zn(e){var _;var t=e.f;if((t&ce)!==0)return!0;if((t&ht)!==0){var n=e.deps,r=(t&ge)!==0;if(n!==null){var s,i,a=(t&An)!==0,l=r&&I!==null&&!vt,o=n.length;if((a||l)&&(I===null||(I.f&Ge)===0)){var u=e,v=u.parent;for(s=0;s<o;s++)i=n[s],(a||!((_=i==null?void 0:i.reactions)!=null&&_.includes(u)))&&(i.reactions??(i.reactions=[])).push(u);a&&(u.f^=An),l&&v!==null&&(v.f&ge)===0&&(u.f^=ge)}for(s=0;s<o;s++)if(i=n[s],zn(i)&&li(i),i.wv>e.wv)return!0}(!r||I!==null&&!vt)&&ne(e,ee)}return!1}function ki(e,t,n=!0){var r=e.reactions;if(r!==null&&!(te!=null&&te.includes(e)))for(var s=0;s<r.length;s++){var i=r[s];(i.f&ie)!==0?ki(i,t,!1):t===i&&(n?ne(i,ce):(i.f&ee)!==0&&ne(i,ht),Tt(i))}}function Di(e){var w;var t=$,n=ue,r=pe,s=k,i=vt,a=te,l=U,o=De,u=Ot,v=e.f;$=null,ue=0,pe=null,vt=(v&ge)!==0&&(De||!Kt||k===null),k=(v&(Je|Mt))===0?e:null,te=null,Qt(e.ctx),De=!1,Ot=++pn,e.ac!==null&&(Kn(()=>{e.ac.abort(Vt)}),e.ac=null);try{e.f|=rr;var _=e.fn,p=_(),h=e.deps;if($!==null){var d;if(Ln(e,ue),h!==null&&ue>0)for(h.length=ue+$.length,d=0;d<$.length;d++)h[ue+d]=$[d];else e.deps=h=$;if(!vt||(v&ie)!==0&&e.reactions!==null)for(d=ue;d<h.length;d++)((w=h[d]).reactions??(w.reactions=[])).push(e)}else h!==null&&ue<h.length&&(Ln(e,ue),h.length=ue);if(yn()&&pe!==null&&!De&&h!==null&&(e.f&(ie|ht|ce))===0)for(d=0;d<pe.length;d++)ki(pe[d],e);return s!==null&&s!==e&&(pn++,pe!==null&&(r===null?r=pe:r.push(...pe))),(e.f&Nt)!==0&&(e.f^=Nt),p}catch(y){return ei(y)}finally{e.f^=rr,$=t,ue=n,pe=r,k=s,vt=i,te=a,Qt(l),De=o,Ot=u}}function Xs(e,t){let n=t.reactions;if(n!==null){var r=zi.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&ie)!==0&&($===null||!$.includes(t))&&(ne(t,ht),(t.f&(ge|An))===0&&(t.f^=An),ai(t),Ln(t,0))}function Ln(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Xs(e,n[r])}function Pn(e){var t=e.f;if((t&Ge)===0){ne(e,ee);var n=I,r=Kt;I=e,Kt=!0;try{(t&Ct)!==0?zs(e):bi(e),pi(e);var s=Di(e);e.teardown=typeof s=="function"?s:null,e.wv=Si;var i;Yr&&xs&&(e.f&ce)!==0&&e.deps}finally{Kt=r,I=n}}}async function Qs(){await Promise.resolve(),Ds()}function f(e){var t=e.f,n=(t&ie)!==0;if(k!==null&&!De){var r=I!==null&&(I.f&Ge)!==0;if(!r&&!(te!=null&&te.includes(e))){var s=k.deps;if((k.f&rr)!==0)e.rv<pn&&(e.rv=pn,$===null&&s!==null&&s[ue]===e?ue++:$===null?$=[e]:(!vt||!$.includes(e))&&$.push(e));else{(k.deps??(k.deps=[])).push(e);var i=e.reactions;i===null?e.reactions=[k]:i.includes(k)||i.push(k)}}}else if(n&&e.deps===null&&e.effects===null){var a=e,l=a.parent;l!==null&&(l.f&ge)===0&&(a.f^=ge)}if(At){if(_t.has(e))return _t.get(e);if(n){a=e;var o=a.v;return((a.f&ee)===0&&a.reactions!==null||Ii(a))&&(o=yr(a)),_t.set(a,o),o}}else if(n){if(a=e,W!=null&&W.has(a))return W.get(a);zn(a)&&li(a)}if(W!=null&&W.has(e))return W.get(e);if((e.f&Nt)!==0)throw e.v;return e.v}function Ii(e){if(e.v===K)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(_t.has(t)||(t.f&ie)!==0&&Ii(t))return!0;return!1}function Lt(e){var t=De;try{return De=!0,e()}finally{De=t}}const $s=-7169;function ne(e,t){e.f=e.f&$s|t}const ea=["touchstart","touchmove"];function ta(e){return ea.includes(e)}const Ni=new Set,fr=new Set;function na(e,t,n,r={}){function s(i){if(r.capture||cn.call(t,i),!i.cancelBubble)return Kn(()=>n==null?void 0:n.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?xn(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function Br(e,t,n,r,s){var i={capture:r,passive:s},a=na(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&xr(()=>{t.removeEventListener(e,a,i)})}function Dr(e){for(var t=0;t<e.length;t++)Ni.add(e[t]);for(var n of fr)n(e)}let Ur=null;function cn(e){var P;var t=this,n=t.ownerDocument,r=e.type,s=((P=e.composedPath)==null?void 0:P.call(e))||[],i=s[0]||e.target;Ur=e;var a=0,l=Ur===e&&e.__root;if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(i=s[a]||e.target,i!==t){Mn(e,"currentTarget",{configurable:!0,get(){return i||n}});var v=k,_=I;le(null),je(null);try{for(var p,h=[];i!==null;){var d=i.assignedSlot||i.parentNode||i.host||null;try{var w=i["__"+r];if(w!=null&&(!i.disabled||e.target===i))if(dr(w)){var[y,...B]=w;y.apply(i,[e,...B])}else w.call(i,e)}catch(g){p?h.push(g):p=g}if(e.cancelBubble||d===t||d===null)break;i=d}if(p){for(let g of h)queueMicrotask(()=>{throw g});throw p}}finally{e.__root=t,delete e.currentTarget,le(v),je(_)}}}function Oi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ir(e,t){var n=I;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function V(e,t){var n=(t&ms)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Oi(s?e:"<!>"+e),r=hn(r));var i=n||fi?document.importNode(r,!0):r.cloneNode(!0);return Ir(i,i),i}}function ra(e,t,n="svg"){var r=!e.startsWith("<!>"),s=`<${n}>${r?e:"<!>"+e}</${n}>`,i;return()=>{if(!i){var a=Oi(s),l=hn(a);i=hn(l)}var o=i.cloneNode(!0);return Ir(o,o),o}}function Qe(e,t){return ra(e,t,"svg")}function ot(){var e=document.createDocumentFragment(),t=document.createComment(""),n=tn();return e.append(t,n),Ir(t,n),e}function D(e,t){e!==null&&e.before(t)}function ze(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function ia(e,t){return sa(e,t)}const Ut=new Map;function sa(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:a=!0}){Hs();var l=new Set,o=_=>{for(var p=0;p<_.length;p++){var h=_[p];if(!l.has(h)){l.add(h);var d=ta(h);t.addEventListener(h,cn,{passive:d});var w=Ut.get(h);w===void 0?(document.addEventListener(h,cn,{passive:d}),Ut.set(h,1)):Ut.set(h,w+1)}}};o(_r(Ni)),fr.add(o);var u=void 0,v=Ys(()=>{var _=n??t.appendChild(tn());return Ts(_,{pending:()=>{}},p=>{if(i){Vn({});var h=U;h.c=i}s&&(r.$$events=s),u=e(p,r)||{},i&&Wn()}),()=>{var d;for(var p of l){t.removeEventListener(p,cn);var h=Ut.get(p);--h===0?(document.removeEventListener(p,cn),Ut.delete(p)):Ut.set(p,h)}fr.delete(o),_!==n&&((d=_.parentNode)==null||d.removeChild(_))}});return aa.set(u,v),u}let aa=new WeakMap;var Ze,Fe,Se,mn,gn;class Ti{constructor(t,n=!0){at(this,"anchor");C(this,Ze,new Map);C(this,Fe,new Map);C(this,Se,new Map);C(this,mn,!0);C(this,gn,()=>{var t=L;if(c(this,Ze).has(t)){var n=c(this,Ze).get(t),r=c(this,Fe).get(n);if(r)kr(r);else{var s=c(this,Se).get(n);s&&(c(this,Fe).set(n,s.effect),c(this,Se).delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,a]of c(this,Ze)){if(c(this,Ze).delete(i),i===t)break;const l=c(this,Se).get(a);l&&(oe(l.effect),c(this,Se).delete(a))}for(const[i,a]of c(this,Fe)){if(i===n)continue;const l=()=>{if(Array.from(c(this,Ze).values()).includes(i)){var u=document.createDocumentFragment();yi(a,u),u.append(tn()),c(this,Se).set(i,{effect:a,fragment:u})}else oe(a);c(this,Fe).delete(i)};c(this,mn)||!r?Yt(a,l,!1):l()}}});this.anchor=t,E(this,mn,n)}ensure(t,n){var r=L,s=di();if(n&&!c(this,Fe).has(t)&&!c(this,Se).has(t))if(s){var i=document.createDocumentFragment(),a=tn();i.append(a),c(this,Se).set(t,{effect:Ee(()=>n(a)),fragment:i})}else c(this,Fe).set(t,Ee(()=>n(this.anchor)));if(c(this,Ze).set(r,t),s){for(const[l,o]of c(this,Fe))l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of c(this,Se))l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.add_callback(c(this,gn))}else c(this,gn).call(this)}}Ze=new WeakMap,Fe=new WeakMap,Se=new WeakMap,mn=new WeakMap,gn=new WeakMap;function Q(e,t,n=!1){var r=new Ti(e),s=n?wn:0;function i(a,l){r.ensure(a,l)}Zn(()=>{var a=!1;t((l,o=!0)=>{a=!0,i(o,l)}),a||i(!1,null)},s)}function la(e,t,n){for(var r=e.items,s=[],i=t.length,a=0;a<i;a++)Er(t[a].e,s,!0);var l=i>0&&s.length===0&&n!==null;if(l){var o=n.parentNode;js(o),o.append(n),r.clear(),Me(e,t[0].prev,t[i-1].next)}gi(s,()=>{for(var u=0;u<i;u++){var v=t[u];l||(r.delete(v.k),Me(e,v.prev,v.next)),oe(v.e,!l)}})}function $n(e,t,n,r,s,i=null){var a=e,l={flags:t,items:new Map,first:null},o=(t&Gr)!==0;if(o){var u=e;a=u.appendChild(tn())}var v=null,_=!1,p=new Map,h=wr(()=>{var B=n();return dr(B)?B:B==null?[]:_r(B)}),d,w;function y(){oa(w,d,l,p,a,s,t,r,n),i!==null&&(d.length===0?v?kr(v):v=Ee(()=>i(a)):v!==null&&Yt(v,()=>{v=null}))}Zn(()=>{w??(w=I),d=f(h);var B=d.length;if(!(_&&B===0)){_=B===0;var P,g,F,H;if(di()){var N=new Set,R=L;for(g=0;g<B;g+=1){F=d[g],H=r(F,g);var G=l.items.get(H)??p.get(H);G?(t&(Un|qn))!==0&&Ri(G,F,g,t):(P=Ci(null,l,null,null,F,H,g,s,t,n,!0),p.set(H,P)),N.add(H)}for(const[Ne,tt]of l.items)N.has(Ne)||R.skipped_effects.add(tt.e);R.add_callback(y)}else y();f(h)}})}function oa(e,t,n,r,s,i,a,l,o){var We,En,kn,sn;var u=(a&ds)!==0,v=(a&(Un|qn))!==0,_=t.length,p=n.items,h=n.first,d=h,w,y=null,B,P=[],g=[],F,H,N,R;if(u)for(R=0;R<_;R+=1)F=t[R],H=l(F,R),N=p.get(H),N!==void 0&&((We=N.a)==null||We.measure(),(B??(B=new Set)).add(N));for(R=0;R<_;R+=1){if(F=t[R],H=l(F,R),N=p.get(H),N===void 0){var G=r.get(H);if(G!==void 0){r.delete(H),p.set(H,G);var Ne=y?y.next:d;Me(n,y,G),Me(n,G,Ne),er(G,Ne,s),y=G}else{var tt=d?d.e.nodes_start:s;y=Ci(tt,n,y,y===null?n.first:y.next,F,H,R,i,a,o)}p.set(H,y),P=[],g=[],d=y.next;continue}if(v&&Ri(N,F,R,a),(N.e.f&fe)!==0&&(kr(N.e),u&&((En=N.a)==null||En.unfix(),(B??(B=new Set)).delete(N))),N!==d){if(w!==void 0&&w.has(N)){if(P.length<g.length){var Oe=g[0],ve;y=Oe.prev;var Ue=P[0],nt=P[P.length-1];for(ve=0;ve<P.length;ve+=1)er(P[ve],Oe,s);for(ve=0;ve<g.length;ve+=1)w.delete(g[ve]);Me(n,Ue.prev,nt.next),Me(n,y,Ue),Me(n,nt,Oe),d=Oe,y=nt,R-=1,P=[],g=[]}else w.delete(N),er(N,d,s),Me(n,N.prev,N.next),Me(n,N,y===null?n.first:y.next),Me(n,y,N),y=N;continue}for(P=[],g=[];d!==null&&d.k!==H;)(d.e.f&fe)===0&&(w??(w=new Set)).add(d),g.push(d),d=d.next;if(d===null)continue;N=d}P.push(N),y=N,d=N.next}if(d!==null||w!==void 0){for(var Te=w===void 0?[]:_r(w);d!==null;)(d.e.f&fe)===0&&Te.push(d),d=d.next;var pt=Te.length;if(pt>0){var qe=(a&Gr)!==0&&_===0?s:null;if(u){for(R=0;R<pt;R+=1)(kn=Te[R].a)==null||kn.measure();for(R=0;R<pt;R+=1)(sn=Te[R].a)==null||sn.fix()}la(n,Te,qe)}}u&&xn(()=>{var an;if(B!==void 0)for(N of B)(an=N.a)==null||an.apply()}),e.first=n.first&&n.first.e,e.last=y&&y.e;for(var Ve of r.values())oe(Ve.e);r.clear()}function Ri(e,t,n,r){(r&Un)!==0&&en(e.v,t),(r&qn)!==0?en(e.i,n):e.i=n}function Ci(e,t,n,r,s,i,a,l,o,u,v){var _=(o&Un)!==0,p=(o&_s)===0,h=_?p?oi(s,!1,!1):Rt(s):s,d=(o&qn)===0?a:Rt(a),w={i:d,v:h,k:i,a:null,e:null,prev:n,next:r};try{if(e===null){var y=document.createDocumentFragment();y.append(e=tn())}return w.e=Ee(()=>l(e,h,d,u),ys),w.e.prev=n&&n.e,w.e.next=r&&r.e,n===null?v||(t.first=w):(n.next=w,n.e.next=w.e),r!==null&&(r.prev=w,r.e.prev=w.e),w}finally{}}function er(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==null&&i!==r;){var a=Sn(i);s.before(i),i=a}}function Me(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ua(e,t,...n){var r=new Ti(e);Zn(()=>{const s=t()??null;r.ensure(s,s&&(i=>s(i,...n)))},wn)}function fa(e,t,n){Ks(()=>{var r=Lt(()=>t(e,n==null?void 0:n())||{});if(r!=null&&r.destroy)return()=>r.destroy()})}function Mi(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Mi(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ca(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Mi(e))&&(r&&(r+=" "),r+=t);return r}function $e(e){return typeof e=="object"?ca(e):e??""}function va(e,t,n){var r=e==null?"":""+e;return r===""?null:r}function Ie(e,t,n,r,s,i){var a=e.__className;if(a!==n||a===void 0){var l=va(n);l==null?e.removeAttribute("class"):t?e.className=l:e.setAttribute("class",l),e.__className=n}return i}const da=Symbol("is custom element"),_a=Symbol("is html");function Be(e,t,n,r){var s=ha(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[ns]=n),n==null?e.removeAttribute(t):typeof n!="string"&&pa(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function ha(e){return e.__attributes??(e.__attributes={[da]:e.nodeName.includes("-"),[_a]:e.namespaceURI===gs})}var qr=new Map;function pa(e){var t=e.getAttribute("is")||e.nodeName,n=qr.get(t);if(n)return n;qr.set(t,n=[]);for(var r,s=e,i=Element.prototype;i!==s;){r=Gi(s);for(var a in r)r[a].set&&n.push(a);s=Kr(s)}return n}function fn(e,t,n=t){var r=new WeakSet;_i(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=tr(e)?nr(i):i,n(i),L!==null&&r.add(L),await Qs(),i!==(i=t())){var a=e.selectionStart,l=e.selectionEnd,o=e.value.length;if(e.value=i??"",l!==null){var u=e.value.length;a===l&&l===o&&u>o?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=a,e.selectionEnd=Math.min(l,u))}}}),Lt(t)==null&&e.value&&(n(tr(e)?nr(e.value):e.value),L!==null&&r.add(L)),Sr(()=>{var s=t();if(e===document.activeElement){var i=Tn??L;if(r.has(i))return}tr(e)&&s===nr(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ba(e,t,n=t){_i(e,"change",r=>{var s=r?e.defaultChecked:e.checked;n(s)}),Lt(t)==null&&n(e.checked),Sr(()=>{var r=t();e.checked=!!r})}function tr(e){var t=e.type;return t==="number"||t==="range"}function nr(e){return e===""?null:+e}function Ai(e,t,n){if(e==null)return t(void 0),It;const r=Lt(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const qt=[];function ma(e,t=It){let n=null;const r=new Set;function s(l){if(Xr(e,l)&&(e=l,n)){const o=!qt.length;for(const u of r)u[1](),qt.push(u,e);if(o){for(let u=0;u<qt.length;u+=2)qt[u][0](qt[u+1]);qt.length=0}}}function i(l){s(l(e))}function a(l,o=It){const u=[l,o];return r.add(u),r.size===1&&(n=t(s,i)||It),l(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:a}}function ga(e){let t;return Ai(e,n=>t=n)(),t}let Nn=!1,cr=Symbol();function wa(e,t,n){const r=n[t]??(n[t]={store:null,source:oi(void 0),unsubscribe:It});if(r.store!==e&&!(cr in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=It;else{var s=!0;r.unsubscribe=Ai(e,i=>{s?r.source.v=i:T(r.source,i)}),s=!1}return e&&cr in n?ga(e):f(r.source)}function vn(e,t){return e.set(t),t}function ya(){const e={};function t(){xr(()=>{for(var n in e)e[n].unsubscribe();Mn(e,cr,{enumerable:!1,value:!0})})}return[e,t]}function xa(e){var t=Nn;try{return Nn=!1,[e(),Nn]}finally{Nn=t}}function et(e,t,n,r){var P;var s=!rn||(n&hs)!==0,i=(n&bs)!==0,a=r,l=!0,o=()=>(l&&(l=!1,a=r),a),u;{var v=On in e||ts in e;u=((P=Wt(e,t))==null?void 0:P.set)??(v&&t in e?g=>e[t]=g:void 0)}var _,p=!1;[_,p]=xa(()=>e[t]),_===void 0&&r!==void 0&&(_=o(),u&&(s&&os(),u(_)));var h;if(s?h=()=>{var g=e[t];return g===void 0?o():(l=!0,g)}:h=()=>{var g=e[t];return g!==void 0&&(a=void 0),g===void 0?a:g},s&&(n&ps)===0)return h;if(u){var d=e.$$legacy;return(function(g,F){return arguments.length>0?((!s||!F||d||p)&&u(F?h():g),g):h()})}var w=!1,y=wr(()=>(w=!1,h()));f(y);var B=I;return(function(g,F){if(arguments.length>0){const H=F?f(y):s&&i?xt(g):g;return T(y,H),w=!0,a!==void 0&&(a=H),g}return At&&w||(B.f&Ge)!==0?y.v:f(y)})}function Li(e){U===null&&zr(),rn&&U.l!==null?Ea(U).m.push(e):Ws(()=>{const t=Lt(e);if(typeof t=="function")return t})}function Sa(e){U===null&&zr(),Li(()=>()=>Lt(e))}function Ea(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ka="5";var Wr;typeof window<"u"&&((Wr=window.__svelte??(window.__svelte={})).v??(Wr.v=new Set)).add(ka);const Da=()=>{const e=["Бокс","Плавание","Вокал","Гитара","Ударные"],t=new Date,n=new Date;return n.setDate(t.getDate()+30),e.map(r=>({id:crypto.randomUUID(),name:r,sessionsLeft:12,startDate:t.toISOString(),endDate:n.toISOString(),history:[],lastRenewSessions:12,lastRenewDuration:30}))},Pi="subscriptions",Vr=typeof window<"u"?window.localStorage.getItem(Pi):null,Ia=Vr?JSON.parse(Vr):Da(),wt=ma(Ia);wt.subscribe(e=>{typeof window<"u"&&window.localStorage.setItem(Pi,JSON.stringify(e))});Ss();var Na=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18M-4.5 12h22.5"></path></svg>');function Oa(e,t){let n=et(t,"className",8,"w-5 h-5");var r=Na();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}var Ta=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>');function Ra(e,t){let n=et(t,"className",8,"w-5 h-5");var r=Ta();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}var Ca=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.033-2.134H8.71c-1.123 0-2.033.954-2.033 2.134v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>');function Fi(e,t){let n=et(t,"className",8,"w-5 h-5");var r=Ca();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}var Ma=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path></svg>');function Aa(e,t){let n=et(t,"className",8,"w-5 h-5");var r=Ma();Be(r,"stroke-width",2),z(()=>Ie(r,0,$e(n()))),D(e,r)}var La=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.362-3.797 8.33 8.33 0 0 1 3-.39Z"></path></svg>');function Pa(e,t){let n=et(t,"className",8,"w-5 h-5");var r=La();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}var Fa=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18M12 15.75h.008v.008H12v-.008Zm0-2.25h.008v.008H12v-.008Zm-2.25.008h.008v.008H9.75v-.008Zm0 2.25h.008v.008H9.75v-.008Zm-2.25-2.25h.008v.008H7.5v-.008Zm2.25 2.25h.008v.008H9.75v-.008Zm2.25-2.25h.008v.008H12v-.008Zm2.25.008h.008v.008H14.25v-.008Zm0 2.25h.008v.008H14.25v-.008Z"></path></svg>');function Ha(e,t){let n=et(t,"className",8,"w-5 h-5");var r=Fa();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}var ja=V('<div class="flex items-center text-amber-400 text-sm mb-4 p-2 bg-amber-500/10 rounded-lg"><!> <span>Срок действия скоро истекает!</span></div>'),Ba=(e,t)=>{var n;return(n=t.onmarkSession)==null?void 0:n.call(t,t.subscription.id)},Ua=(e,t)=>{var n;return(n=t.onmarkSessionWithDate)==null?void 0:n.call(t,t.subscription)},qa=(e,t)=>{var n;return(n=t.onrenew)==null?void 0:n.call(t,t.subscription)},Va=(e,t)=>{var n;return(n=t.onviewHistory)==null?void 0:n.call(t,t.subscription)},Wa=(e,t)=>{var n;return(n=t.ondelete)==null?void 0:n.call(t,t.subscription)},Ya=V('<div><div><h3 class="text-2xl font-bold text-text-main mb-2"> </h3> <div class="flex items-center text-text-secondary mb-4"><!> <span> </span></div> <!> <div class="text-center my-6"><p class="text-text-secondary text-lg">Осталось занятий</p> <p> </p></div></div> <div class="flex flex-col space-y-3"><div class="flex space-x-2"><button class="flex-grow flex items-center justify-center bg-primary text-white font-bold py-3 px-4 rounded-lg transition-colors hover:bg-primary-hover disabled:bg-gray-500 disabled:cursor-not-allowed"><!> Отметить занятие</button> <button class="flex-shrink-0 bg-primary/80 text-white p-3 rounded-lg transition-colors hover:bg-primary-hover disabled:bg-gray-500 disabled:cursor-not-allowed" aria-label="Отметить занятие с выбором даты"><!></button></div> <button class="w-full bg-secondary text-white font-bold py-3 px-4 rounded-lg transition-colors hover:bg-secondary-hover">Продлить</button> <div class="flex space-x-2 pt-2"><button class="flex-grow flex items-center justify-center bg-gray-600/30 text-text-secondary font-semibold py-2 px-4 rounded-lg transition-colors hover:bg-gray-600/50"><!> История</button> <button class="flex-shrink-0 p-3 bg-red-500/20 text-red-400 rounded-lg transition-colors hover:bg-red-500/40 hover:text-red-300" aria-label="Удалить абонемент"><!></button></div></div></div>');function Ka(e,t){Vn(t,!0);let n=ke(()=>{if(!t.subscription.endDate)return null;const qe=new Date(t.subscription.endDate),Ve=new Date,We=qe.getTime()-Ve.getTime();return We<0?-1:Math.ceil(We/(1e3*60*60*24))}),r=ke(()=>f(n)!==null&&f(n)<0),s=ke(()=>f(n)!==null&&f(n)<=7&&f(n)>=0),i=ke(()=>t.subscription.sessionsLeft===0),a=ke(()=>f(r)?"border-red-500/50":f(s)?"border-amber-500/50":"border-transparent"),l=ke(()=>t.subscription.endDate?new Date(t.subscription.endDate).toLocaleDateString():"Бессрочный");var o=Ya(),u=m(o),v=m(u),_=m(v),p=O(v,2),h=m(p);Oa(h,{className:"mr-2"});var d=O(h,2),w=m(d),y=O(p,2);{var B=qe=>{var Ve=ja(),We=m(Ve);Pa(We,{className:"mr-2"}),D(qe,Ve)};Q(y,qe=>{f(s)&&!f(r)&&qe(B)})}var P=O(y,2),g=O(m(P),2),F=m(g),H=O(u,2),N=m(H),R=m(N);R.__click=[Ba,t];var G=m(R);Aa(G,{className:"mr-2"});var Ne=O(R,2);Ne.__click=[Ua,t];var tt=m(Ne);Ha(tt,{});var Oe=O(N,2);Oe.__click=[qa,t];var ve=O(Oe,2),Ue=m(ve);Ue.__click=[Va,t];var nt=m(Ue);Ra(nt,{className:"mr-2"});var Te=O(Ue,2);Te.__click=[Wa,t];var pt=m(Te);Fi(pt,{}),z(()=>{Be(o,"id",t.subscription.id),Ie(o,1,`bg-card-bg rounded-2xl shadow-lg p-6 flex flex-col justify-between transition-all duration-300 hover:shadow-primary/20 hover:-translate-y-1 border ${f(a)}`),ze(_,t.subscription.name),ze(w,f(r)?"Абонемент истек":`Действителен до: ${f(l)}`),Ie(g,1,`text-6xl font-bold ${t.subscription.sessionsLeft>0?"text-primary":"text-red-500"}`),ze(F,t.subscription.sessionsLeft),R.disabled=f(i)||f(r),Ne.disabled=f(i)||f(r)}),D(e,o),Wn()}Dr(["click"]);var Za=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>');function za(e,t){let n=et(t,"className",8,"w-6 h-6");var r=Za();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}function Ga(e,t){e.target===e.currentTarget&&t()}var Ja=V('<div class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 transition-opacity" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-card-bg rounded-2xl shadow-xl w-full max-w-md m-4 p-8 relative transform transition-all"><div class="flex justify-between items-center mb-6"><h2 id="modal-title" class="text-2xl font-bold text-text-main"> </h2> <button class="text-text-secondary hover:text-text-main transition-colors" aria-label="Close modal"><!></button></div> <div><!></div></div></div>');function Xa(e,t){Vn(t,!0);function n(){var l;(l=t.onclose)==null||l.call(t)}function r(l){l.key==="Escape"&&n()}Li(()=>{window.addEventListener("keydown",r)}),Sa(()=>{window.removeEventListener("keydown",r)});var s=ot(),i=lt(s);{var a=l=>{var o=Ja();o.__click=[Ga,n];var u=m(o),v=m(u),_=m(v),p=m(_),h=O(_,2);h.__click=n;var d=m(h);za(d,{});var w=O(v,2),y=m(w);ua(y,()=>t.children??It),z(()=>ze(p,t.title)),D(l,o)};Q(i,l=>{t.isOpen&&l(a)})}D(e,s),Wn()}Dr(["click"]);var Qa=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function $a(e,t){let n=et(t,"className",8,"w-6 h-6");var r=Qa();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}var el=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"></path></svg>');function tl(e,t){let n=et(t,"className",8,"w-6 h-6");var r=el();Be(r,"stroke-width",1.5),z(()=>Ie(r,0,$e(n()))),D(e,r)}function nl(e,t,n,r){var s;((s=f(t))==null?void 0:s.type)==="MARK_SESSION_CONFIRM"&&(n(f(t).subscription.id),r())}function rl(e,t,n,r){var s;((s=f(t))==null?void 0:s.type)==="DELETE_CONFIRM"&&(vn(wt,n().filter(i=>i.id!==f(t).subscription.id)),r())}function il(e,t,n){var i;if(((i=f(t))==null?void 0:i.type)!=="DELETE_HISTORY_CONFIRM")return;const{subscription:r,historyDate:s}=f(t);n(r.id,s),T(t,{type:"VIEW_HISTORY",subscription:r},!0)}var sl=(e,t)=>T(t,!f(t)),al=V('<button class="p-2 rounded-full hover:bg-white/10 transition-colors" aria-label="Быстрая навигация"><!></button>'),ll=(e,t,n)=>t(f(n).id),ol=V('<li><button class="w-full text-left px-3 py-2 text-text-secondary hover:bg-primary/20 hover:text-text-main rounded-md transition-colors"> </button></li>'),ul=V('<div class="absolute top-full right-0 mt-2 w-64 bg-card-bg rounded-lg shadow-lg p-2 animate-fade-in-up"><ul class="space-y-1"></ul></div>'),fl=V('<div class="text-center text-text-secondary mt-20"><h2 class="text-2xl mb-2">У вас пока нет абонементов</h2> <p>Нажмите "Добавить", чтобы начать отслеживать.</p></div>'),cl=V('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>'),vl=V('<div class="mb-4"><label for="name" class="block text-sm font-medium text-text-secondary mb-1">Название абонемента</label> <input type="text" id="name" class="w-full bg-brand-bg border border-gray-600 rounded-lg p-2 text-text-main focus:ring-primary focus:border-primary" required/></div>'),dl=V('<div class="mb-6"><label for="duration" class="block text-sm font-medium text-text-secondary mb-1">Срок действия (дней)</label> <input type="number" id="duration" class="w-full bg-brand-bg border border-gray-600 rounded-lg p-2 text-text-main focus:ring-primary focus:border-primary" required min="1"/></div>'),_l=V('<form><!> <div class="mb-4"><label for="sessions" class="block text-sm font-medium text-text-secondary mb-1">Количество занятий</label> <input type="number" id="sessions" class="w-full bg-brand-bg border border-gray-600 rounded-lg p-2 text-text-main focus:ring-primary focus:border-primary" required min="1"/></div> <div class="mb-4"><label for="startDate" class="block text-sm font-medium text-text-secondary mb-1">Дата старта</label> <input type="date" id="startDate" class="w-full bg-brand-bg border border-gray-600 rounded-lg p-2 text-text-main focus:ring-primary focus:border-primary" required/></div> <div class="mb-4"><label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-500 bg-brand-bg text-primary focus:ring-primary"/> <span class="ml-2 text-text-secondary">Есть срок действия</span></label></div> <!> <button type="submit" class="w-full bg-primary text-white font-bold py-3 px-4 rounded-lg transition-colors hover:bg-primary-hover"> </button></form>'),hl=(e,t,n,r)=>t({type:"DELETE_HISTORY_CONFIRM",subscription:f(n),historyDate:r}),pl=V('<li class="flex justify-between items-center bg-brand-bg p-3 rounded-lg text-text-secondary"><span> </span> <button class="p-1 text-gray-500 hover:text-red-500 rounded-full hover:bg-red-500/10 transition-colors" aria-label="Удалить запись"><!></button></li>'),bl=V('<ul class="space-y-2 max-h-80 overflow-y-auto"></ul>'),ml=V('<p class="text-text-secondary text-center">История посещений пуста.</p>'),gl=V("<div><!></div>"),wl=V('<div><p class="text-text-secondary mb-6"> </p> <div class="flex justify-end space-x-4"><button class="py-2 px-4 rounded-lg bg-gray-600/50 hover:bg-gray-600/80 transition-colors">Отмена</button> <button class="py-2 px-4 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors">Удалить</button></div></div>'),yl=V('<div><p class="text-text-secondary mb-6">Вы уже отмечали занятие сегодня. Вы уверены, что хотите добавить еще одно?</p> <div class="flex justify-end space-x-4"><button class="py-2 px-4 rounded-lg bg-gray-600/50 hover:bg-gray-600/80 transition-colors">Отмена</button> <button class="py-2 px-4 rounded-lg bg-primary text-white hover:bg-primary-hover transition-colors">Подтвердить</button></div></div>'),xl=V('<form><div class="mb-6"><label for="sessionDate" class="block text-sm font-medium text-text-secondary mb-1">Дата и время занятия</label> <input type="datetime-local" id="sessionDate" class="w-full bg-brand-bg border border-gray-600 rounded-lg p-2 text-text-main focus:ring-primary focus:border-primary" required/></div> <button type="submit" class="w-full bg-primary text-white font-bold py-3 px-4 rounded-lg transition-colors hover:bg-primary-hover">Подтвердить</button></form>'),Sl=(e,t,n)=>t({type:"VIEW_HISTORY",subscription:f(n)}),El=V('<div><p class="text-text-secondary mb-6"> </p> <div class="flex justify-end space-x-4"><button class="py-2 px-4 rounded-lg bg-gray-600/50 hover:bg-gray-600/80 transition-colors">Отмена</button> <button class="py-2 px-4 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors">Удалить</button></div></div>'),kl=(e,t)=>t({type:"ADD_SUBSCRIPTION"}),Dl=V('<div class="min-h-screen"><header class="sticky top-0 z-30 bg-brand-bg/90 backdrop-blur-sm shadow-md"><div class="container mx-auto px-4 py-4 flex justify-between items-center"><h1 class="text-3xl font-bold">Мои Абонементы</h1> <div class="relative"><!> <!></div></div></header> <main class="container mx-auto px-4 py-8"><!></main> <!> <button class="fixed z-40 bottom-8 right-8 w-16 h-16 bg-primary rounded-full flex items-center justify-center text-white shadow-lg transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-primary-hover" aria-label="Добавить абонемент"><!></button></div>');function Il(e,t){Vn(t,!0);const n=()=>wa(wt,"$subscriptions",r),[r,s]=ya();let i=Z(null),a=Z(""),l=Z(""),o=Z(""),u=Z(xt(new Date().toISOString().split("T")[0])),v=Z(!0),_=Z(""),p=Z(!1);function h(){if(!f(a)||!f(l)||!f(u))return;const b=parseInt(f(l),10);if(isNaN(b)||b<=0)return;const S=new Date(f(u));let x=null,M=null;if(f(v)){const de=parseInt(f(o),10);!isNaN(de)&&de>0&&(M=de,x=new Date(S),x.setDate(S.getDate()+M))}const A={id:crypto.randomUUID(),name:f(a),sessionsLeft:b,startDate:S.toISOString(),endDate:x?x.toISOString():null,history:[],lastRenewSessions:b,lastRenewDuration:M};vn(wt,[...n(),A]),F()}function d(){var S;if(((S=f(i))==null?void 0:S.type)!=="RENEW_SUBSCRIPTION"||!f(u))return;const b=parseInt(f(l),10);isNaN(b)||b<=0||(vn(wt,n().map(x=>{if(x.id===f(i).subscription.id){const M=x.sessionsLeft+b;let A=x.endDate?new Date(x.endDate):null,de=null;if(f(v)){const Re=parseInt(f(o),10);if(!isNaN(Re)&&Re>0){de=Re;const J=x.endDate?new Date(x.endDate):null,ln=J&&J.getTime()>Date.now()?J:new Date(f(u));A=new Date(ln),A.setDate(ln.getDate()+de)}}else A=null;return{...x,sessionsLeft:M,endDate:A?A.toISOString():null,lastRenewSessions:b,lastRenewDuration:de}}return x})),F())}function w(b,S=new Date().toISOString()){vn(wt,n().map(x=>x.id===b&&x.sessionsLeft>0?{...x,sessionsLeft:x.sessionsLeft-1,history:[...x.history,S].sort((M,A)=>new Date(A).getTime()-new Date(M).getTime())}:x))}function y(b){const S=n().find(A=>A.id===b);if(!S)return;const x=new Date().toISOString().split("T")[0];S.history.some(A=>new Date(A).toISOString().split("T")[0]===x)?g({type:"MARK_SESSION_CONFIRM",subscription:S}):w(b)}function B(){var S;if(((S=f(i))==null?void 0:S.type)!=="MARK_SESSION_CUSTOM"||!f(_))return;const b=f(i).subscription.id;w(b,new Date(f(_)).toISOString()),F()}function P(b,S){vn(wt,n().map(x=>{if(x.id===b){const M=x.history.filter(A=>A!==S);return{...x,history:M,sessionsLeft:x.sessionsLeft+1}}return x}))}function g(b){var S,x;if(H(),(b==null?void 0:b.type)==="RENEW_SUBSCRIPTION"){const M=b.subscription;T(l,((S=M.lastRenewSessions)==null?void 0:S.toString())??"",!0),M.lastRenewDuration===null?(T(v,!1),T(o,"")):(T(v,!0),T(o,((x=M.lastRenewDuration)==null?void 0:x.toString())??"",!0))}else if((b==null?void 0:b.type)==="MARK_SESSION_CUSTOM"){const M=new Date;M.setMinutes(M.getMinutes()-M.getTimezoneOffset()),T(_,M.toISOString().slice(0,16),!0)}T(i,b,!0)}function F(){T(i,null),H()}function H(){T(a,""),T(l,""),T(o,""),T(u,new Date().toISOString().split("T")[0],!0),T(v,!0),T(_,"")}let N=ke(()=>[...n()].sort((b,S)=>{const x=b.endDate?new Date(b.endDate):new Date("9999-12-31"),M=S.endDate?new Date(S.endDate):new Date("9999-12-31");return x.getTime()-M.getTime()}));function R(b){var S;(S=document.getElementById(b))==null||S.scrollIntoView({behavior:"smooth"}),T(p,!1)}function G(b){const S=x=>{b&&!b.contains(x.target)&&!x.defaultPrevented&&T(p,!1)};return document.addEventListener("click",S,!0),{destroy(){document.removeEventListener("click",S,!0)}}}let Ne=ke(()=>{if(!f(i))return"";const b="subscription"in f(i)?f(i).subscription.name:"";switch(f(i).type){case"ADD_SUBSCRIPTION":return"Новый абонемент";case"RENEW_SUBSCRIPTION":return`Продлить: ${b}`;case"VIEW_HISTORY":return`История: ${b}`;case"DELETE_CONFIRM":return"Подтверждение";case"MARK_SESSION_CONFIRM":return"Подтверждение";case"MARK_SESSION_CUSTOM":return`Отметить занятие: ${b}`;case"DELETE_HISTORY_CONFIRM":return"Подтверждение удаления";default:return""}});var tt=Dl(),Oe=m(tt),ve=m(Oe),Ue=O(m(ve),2),nt=m(Ue);{var Te=b=>{var S=al();S.__click=[sl,p];var x=m(S);tl(x,{}),D(b,S)};Q(nt,b=>{n().length>1&&b(Te)})}var pt=O(nt,2);{var qe=b=>{var S=ul(),x=m(S);$n(x,21,()=>f(N),M=>M.id,(M,A)=>{var de=ol(),Re=m(de);Re.__click=[ll,R,A];var J=m(Re);z(()=>ze(J,f(A).name)),D(M,de)}),D(b,S)};Q(pt,b=>{f(p)&&b(qe)})}fa(Ue,b=>G==null?void 0:G(b));var Ve=O(Oe,2),We=m(Ve);{var En=b=>{var S=fl();D(b,S)},kn=b=>{var S=cl();$n(S,21,()=>f(N),x=>x.id,(x,M)=>{Ka(x,{get subscription(){return f(M)},onmarkSession:y,onmarkSessionWithDate:A=>g({type:"MARK_SESSION_CUSTOM",subscription:A}),onrenew:A=>g({type:"RENEW_SUBSCRIPTION",subscription:A}),onviewHistory:A=>g({type:"VIEW_HISTORY",subscription:A}),ondelete:A=>g({type:"DELETE_CONFIRM",subscription:A})})}),D(b,S)};Q(We,b=>{n().length===0?b(En):b(kn,!1)})}var sn=O(Ve,2);{let b=ke(()=>!!f(i));Xa(sn,{get isOpen(){return f(b)},onclose:F,get title(){return f(Ne)},children:(S,x)=>{var M=ot(),A=lt(M);{var de=Re=>{const J=ke(()=>"subscription"in f(i)?n().find(rt=>rt.id===f(i).subscription.id):void 0);var ln=ot(),ji=lt(ln);{var Bi=rt=>{const Pt=ke(()=>f(i).type==="RENEW_SUBSCRIPTION");var on=_l(),Dn=m(on);{var Gn=j=>{var he=vl(),Ce=O(m(he),2);fn(Ce,()=>f(a),Ke=>T(a,Ke)),D(j,he)};Q(Dn,j=>{f(Pt)||j(Gn)})}var Ye=O(Dn,2),bt=O(m(Ye),2),Ft=O(Ye,2),un=O(m(Ft),2),Ht=O(Ft,2),X=m(Ht),_e=m(X),we=O(Ht,2);{var it=j=>{var he=dl(),Ce=O(m(he),2);fn(Ce,()=>f(o),Ke=>T(o,Ke)),D(j,he)};Q(we,j=>{f(v)&&j(it)})}var st=O(we,2),se=m(st);z(()=>ze(se,f(Pt)?"Продлить":"Добавить")),Br("submit",on,j=>{j.preventDefault(),f(Pt)?d():h()}),fn(bt,()=>f(l),j=>T(l,j)),fn(un,()=>f(u),j=>T(u,j)),ba(_e,()=>f(v),j=>T(v,j)),D(rt,on)},Ui=rt=>{var Pt=ot(),on=lt(Pt);{var Dn=Ye=>{var bt=gl(),Ft=m(bt);{var un=X=>{var _e=bl();$n(_e,20,()=>f(J).history,we=>we,(we,it)=>{var st=pl(),se=m(st),j=m(se),he=O(se,2);he.__click=[hl,g,J,it];var Ce=m(he);Fi(Ce,{className:"w-5 h-5"}),z(Ke=>ze(j,Ke),[()=>new Date(it).toLocaleString()]),D(we,st)}),D(X,_e)},Ht=X=>{var _e=ml();D(X,_e)};Q(Ft,X=>{f(J).history.length>0?X(un):X(Ht,!1)})}D(Ye,bt)},Gn=Ye=>{var bt=ot(),Ft=lt(bt);{var un=X=>{var _e=wl(),we=m(_e),it=m(we),st=O(we,2),se=m(st);se.__click=F;var j=O(se,2);j.__click=[rl,i,n,F],z(()=>ze(it,`Вы уверены, что хотите удалить абонемент "${f(J).name??""}"?`)),D(X,_e)},Ht=X=>{var _e=ot(),we=lt(_e);{var it=se=>{var j=yl(),he=O(m(j),2),Ce=m(he);Ce.__click=F;var Ke=O(Ce,2);Ke.__click=[nl,i,w,F],D(se,j)},st=se=>{var j=ot(),he=lt(j);{var Ce=jt=>{var Bt=xl(),Jn=m(Bt),Xn=O(m(Jn),2);Br("submit",Bt,mt=>{mt.preventDefault(),B()}),fn(Xn,()=>f(_),mt=>T(_,mt)),D(jt,Bt)},Ke=jt=>{var Bt=ot(),Jn=lt(Bt);{var Xn=mt=>{var Nr=El(),Or=m(Nr),qi=m(Or),Vi=O(Or,2),Tr=m(Vi);Tr.__click=[Sl,g,J];var Wi=O(Tr,2);Wi.__click=[il,i,P],z(Yi=>ze(qi,`Вы уверены, что хотите удалить запись от ${Yi??""}?`),[()=>new Date(f(i).historyDate).toLocaleString()]),D(mt,Nr)};Q(Jn,mt=>{f(i).type==="DELETE_HISTORY_CONFIRM"&&f(J)&&"historyDate"in f(i)&&mt(Xn)},!0)}D(jt,Bt)};Q(he,jt=>{f(i).type==="MARK_SESSION_CUSTOM"?jt(Ce):jt(Ke,!1)},!0)}D(se,j)};Q(we,se=>{f(i).type==="MARK_SESSION_CONFIRM"&&f(J)?se(it):se(st,!1)},!0)}D(X,_e)};Q(Ft,X=>{f(i).type==="DELETE_CONFIRM"&&f(J)?X(un):X(Ht,!1)},!0)}D(Ye,bt)};Q(on,Ye=>{f(i).type==="VIEW_HISTORY"&&f(J)?Ye(Dn):Ye(Gn,!1)},!0)}D(rt,Pt)};Q(ji,rt=>{f(i).type==="ADD_SUBSCRIPTION"||f(i).type==="RENEW_SUBSCRIPTION"?rt(Bi):rt(Ui,!1)})}D(Re,ln)};Q(A,Re=>{f(i)&&Re(de)})}D(S,M)},$$slots:{default:!0}})}var an=O(sn,2);an.__click=[kl,g];var Hi=m(an);$a(Hi,{}),D(e,tt),Wn(),s()}Dr(["click"]);ia(Il,{target:document.getElementById("root")});
